# ناسازگاری‌ها و تناقضات (Inconsistencies)

این سند ناسازگاری‌های شناسایی‌شده بین مستندات مختلف پروژه پیدا را مستند می‌کند.

---

## ۱. وضعیت‌های گزارش

### تناقض:
- **پیدا.md (قبلی):** وضعیت‌ها شامل «موفق/بسته شده» بود
- **peyda_ux.md (قبلی):** وضعیت‌ها شامل `active`, `matched`, `on_way`, `resolved`, `expired` بود
- **OpenAPI.yaml (قبلی):** `ReportStatus` شامل `[active, matched, on_way, resolved, expired]`
- **changes2.md:** فقط سه وضعیت: فعال، حل‌شده، معلق

### رفع شده:
وضعیت‌ها به سه حالت ساده‌شده تغییر کردند: `active`, `resolved`, `suspended`

---

## ۲. تعداد عکس‌ها

### تناقض:
- **پیدا.md (قبلی):** «عکس» (مفرد، ۰ یا ۱)
- **peyda_ux.md (قبلی):** «تصویر» (مفرد)
- **OpenAPI.yaml (قبلی):** `media_id` (تکی) و `image_url` (تکی)
- **changes2.md:** ۰ تا ۵ عکس

### رفع شده:
تغییر به `media_ids` (آرایه) و `image_urls` (آرایه) با حداکثر ۵ عکس

---

## ۳. نوار پایین (Bottom Navigation)

### تناقض:
- **peyda_ux.md (قبلی):** ۴ آیتم: خانه، موکب من، جستجو، گزارش‌های من
- **changes2.md:** ۳ آیتم: خانه، موکب من، گزارش‌ها (ادغام جستجو و گزارش‌های من)

### رفع شده:
ادغام «جستجو» و «گزارش‌های من» به یک صفحه «گزارش‌ها»

---

## ۴. دسترسی به جستجو

### تناقض:
- **پیدا.md (قبلی):** «مشاهده لیست و جستجو» فقط برای موکب‌دار تایید شده
- **peyda_ux.md (قبلی):** جستجو فقط برای موکب‌دارهای تایید شده
- **changes2.md:** همه می‌توانند جستجو کنند، اما کاربران غیر موکب‌دار فقط گزارش‌های خود را می‌بینند

### رفع شده:
دسترسی به صفحه گزارش‌ها برای همه، با محدودیت محتوا بر اساس نقش

---

## ۵. فرایند ثبت موکب

### تناقض:
- **peyda_ux.md (قبلی):** ۳ مرحله (اطلاعات پایه، موقعیت، تماس)
- **changes2.md:** ۲ مرحله (نام+موکب‌دار+شماره، موقعیت+آدرس)

### رفع شده:
تغییر به ۲ مرحله با ادغام شماره موبایل در مرحله اول

---

## ۶. فرایند ثبت گزارش

### تناقض:
- **peyda_ux.md (قبلی):** ۸ مرحله جداگانه
- **changes2.md:** ۴ مرحله (اطلاعات پایه، عکس‌ها، موقعیت، تماس+توضیحات)

### رفع شده:
تغییر به ۴ مرحله با گروه‌بندی منطقی‌تر

---

## ۷. سیستم نوتیفیکیشن

### تناقض:
- **پیدا.md (قبلی):** نوتیفیکیشن شعاعی با گسترش مرحله‌ای (۱ کیلومتر، ۲ کیلومتر، ۵ کیلومتر)
- **changes2.md:** فقط نوتیفیکیشن مچ به گزارش‌های قدیمی‌تر

### رفع شده:
حذف سیستم نوتیفیکیشن شعاعی و جایگزینی با نوتیفیکیشن مچ

---

## ۸. فیلترهای جستجو

### تناقض:
- **peyda_ux.md (قبلی):** فیلترهای سن، موقعیت مکانی، بازه زمانی
- **OpenAPI.yaml (قبلی):** `min_age`, `max_age`, `lat`, `lng`, `radius`, `start_date`, `end_date`
- **changes2.md:** فقط جنسیت، نوع، وضعیت، مرتب‌سازی

### رفع شده:
حذف فیلترهای پیچیده و ساده‌سازی به فیلترهای اصلی

---

## ۹. وضعیت مچ

### تناقض:
- **peyda_ux.md (قبلی):** وضعیت‌های پیچیده شامل «در مسیر»، «تطبیق‌یافته»
- **OpenAPI.yaml (قبلی):** `MatchStatus` شامل `[pending, contacted, on_way, confirmed, rejected, resolved]`
- **changes2.md:** فقط سه وضعیت: پیش‌فرض، تایید شده، رد شده

### رفع شده:
ساده‌سازی به `[pending, confirmed, rejected]`

---

## ۱۰. آمار موکب

### تناقض:
- **peyda_ux.md (قبلی):** «آمار عملکرد» بدون جزئیات
- **OpenAPI.yaml (قبلی):** آمار پیچیده شامل `average_response_time`, `current_status`
- **changes2.md:** فقط تعداد گزارش‌ها و تعداد حل‌شده‌ها

### رفع شده:
ساده‌سازی آمار به `total_reports` و `resolved_reports`

---

## نتیجه‌گیری

تمام ناسازگاری‌های شناسایی‌شده در این نسخه (۱.۱) رفع شده‌اند. مستندات اکنون با یکدیگر هماهنگ هستند.
