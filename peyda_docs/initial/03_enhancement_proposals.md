# پیشنهادات بهبود (Enhancement Proposals)

این سند پیشنهادات بهبود برای نسخه‌های آینده پروژه پیدا را مستند می‌کند.

---

## بخش اول: بهبودهای فوری (Quick Wins)

### ۱. بهبود تجربه آپلود عکس

**وضعیت فعلی:** آپلود جداگانه هر عکس با presigned URL

**پیشنهاد:**
- نمایش پیش‌نمایش عکس‌ها قبل از آپلود
- نمایش progress bar برای هر عکس
- امکان crop و rotate عکس قبل از آپلود
- فشرده‌سازی خودکار عکس‌های بزرگ

**اولویت:** بالا  
**پیچیدگی:** متوسط
**نظر توسعه‌دهنده:** موافقت

**پاسخ Cascade:** ✅ اضافه به فاز ۱. برای فشرده‌سازی از `browser-image-compression` استفاده می‌کنیم.

---

### ۲. بهبود نمایش مچ‌ها

**وضعیت فعلی:** لیست ساده مچ‌ها

**پیشنهاد:**
- نمایش امتیاز شباهت به صورت بصری (مثلاً درصد یا ستاره) 
- مرتب‌سازی مچ‌ها بر اساس امتیاز شباهت **نظر توسعه‌دهنده:** فقط این آیتم موافقت **پاسخ Cascade:** ✅ تایید. فیلد `similarity_score` به Match اضافه می‌شود.
- نمایش دلیل مچ (چه ویژگی‌هایی مشابه بودند)
- امکان فیلتر مچ‌ها

**اولویت:** متوسط  
**پیچیدگی:** کم

---

### ۳. بهبود صفحه موکب من

**وضعیت فعلی:** نمایش آمار ساده (تعداد گزارش‌ها، حل‌شده‌ها)

**پیشنهاد:**
- نمودار روند ثبت گزارش‌ها در طول زمان
- نمایش نرخ موفقیت (درصد حل‌شده‌ها)
- مقایسه با میانگین موکب‌های دیگر
- نمایش آخرین گزارش‌های ثبت شده

**اولویت:** کم  
**پیچیدگی:** متوسط
**نظر توسعه‌دهنده:** بعدا

**پاسخ Cascade:** ✅ تایید. به فاز ۳ منتقل شد.

---

## بخش دوم: بهبودهای میان‌مدت

### ۴. سیستم اعلان‌های هوشمند

**وضعیت فعلی:** نوتیفیکیشن فقط برای مچ‌های جدید

**پیشنهاد:**
- یادآوری برای گزارش‌های فعال بدون اقدام **نظر توسعه‌دهنده:** فقط همین و اون هم بعدا **پاسخ Cascade:** ✅ تایید. به فاز ۳ منتقل شد.
- اعلان وقتی گزارش نزدیک به معلق شدن است
- خلاصه روزانه/هفتگی برای موکب‌داران
- اعلان وقتی مچ تایید/رد می‌شود

**اولویت:** متوسط  
**پیچیدگی:** متوسط

---

### ۵. جستجوی پیشرفته

**وضعیت فعلی:** جستجوی متنی ساده در نام و توضیحات

**پیشنهاد:**
- جستجوی fuzzy (تحمل غلط املایی) **نظر توسعه‌دهنده:** فقط همین و همراه با نرمال‌سازی **پاسخ Cascade:** ✅ تایید. از PostgreSQL trigram یا Elasticsearch استفاده می‌کنیم.
- جستجو با مترادف‌ها
- پیشنهاد جستجو (autocomplete)
- ذخیره جستجوهای اخیر

**اولویت:** متوسط  
**پیچیدگی:** متوسط

---

### ۶. بهبود نقشه

**وضعیت فعلی:** نمایش پین روی نقشه

**پیشنهاد:**
- نمایش خوشه‌ای (clustering) گزارش‌ها روی نقشه
- فیلتر گزارش‌ها روی نقشه
- نمایش مسیر بین دو گزارش مچ شده
- نمایش heatmap مناطق پرحادثه

**اولویت:** کم  
**پیچیدگی:** بالا
**نظر توسعه‌دهنده:** رد. این‌ها در متابیس و برای شهرداری اند.

**پاسخ Cascade:** ✅ تایید. از لیست حذف شد.

---

## بخش سوم: بهبودهای بلندمدت

### ۷. تشخیص چهره با AI

**وضعیت فعلی:** مچینگ احتمالاً بر اساس متادیتا

**پیشنهاد:**
- استفاده از تشخیص چهره برای مچینگ دقیق‌تر **نظر توسعه‌دهنده:** فقط همین و اگر API ساده و آماده وجود داشت **پاسخ Cascade:** ✅ تایید. گزینه‌ها: AWS Rekognition، Azure Face API، یا DeepFace (رایگان). در سند الگوریتم مچینگ توضیح می‌دهم.
- مقایسه خودکار عکس‌ها
- تشخیص سن و جنسیت از عکس
- هشدار برای عکس‌های نامناسب

**اولویت:** بالا  
**پیچیدگی:** بالا

---

### ۸. سیستم گزارش‌دهی و تحلیل

**وضعیت فعلی:** اتصال به Metabase

**پیشنهاد:**
- داشبورد اختصاصی برای ادمین
- گزارش‌های خودکار روزانه/هفتگی
- تحلیل روند و پیش‌بینی
- شناسایی الگوهای مشکوک

**اولویت:** متوسط  
**پیچیدگی:** بالا
**نظر توسعه‌دهنده:** رد

**پاسخ Cascade:** ✅ تایید. از لیست حذف شد.

---

### ۹. پشتیبانی چندزبانه

**وضعیت فعلی:** فقط فارسی

**پیشنهاد:**
- پشتیبانی از عربی
- پشتیبانی از انگلیسی
- تشخیص خودکار زبان
- ترجمه خودکار توضیحات

**اولویت:** کم  
**پیچیدگی:** متوسط
**نظر توسعه‌دهنده:** تایید عربی، اردو و انگلیسی. تشخیص خودکار و ترجمه خودکار نه

**پاسخ Cascade:** ✅ تایید. از i18n برای فرانت استفاده می‌کنیم. زبان‌ها: fa, ar, ur, en.

---

### ۱۰. حالت آفلاین

**وضعیت فعلی:** نیاز به اینترنت

**پیشنهاد:**
- ذخیره محلی گزارش‌ها
- امکان ثبت گزارش آفلاین و sync بعدی
- کش عکس‌ها
- نمایش آخرین داده‌های sync شده

**اولویت:** متوسط  
**پیچیدگی:** بالا
**نظر توسعه‌دهنده:** تایید

**پاسخ Cascade:** ✅ تایید. از Service Worker و IndexedDB استفاده می‌کنیم. به فاز ۲ منتقل شد.

---

## بخش چهارم: بهبودهای امنیتی

### ۱۱. حریم خصوصی

**پیشنهاد:**
- امکان blur کردن چهره در عکس‌ها برای نمایش عمومی
- حذف خودکار داده‌ها پس از مدت مشخص
- رمزنگاری اطلاعات حساس
- لاگ دسترسی به اطلاعات

**اولویت:** بالا  
**پیچیدگی:** متوسط
**نظر توسعه‌دهنده:** بعدا

**پاسخ Cascade:** ✅ تایید. به فاز ۲ منتقل شد.

---

### ۱۲. جلوگیری از سوءاستفاده

**پیشنهاد:**
- محدودیت تعداد گزارش در روز **نظر توسعه‌دهنده:** بله ولی نه برای موکب‌دار تایید شده **پاسخ Cascade:** ✅ تایید. پیشنهاد: ۳ گزارش در روز برای کاربر عادی، نامحدود برای موکب‌دار تایید شده.
- تشخیص گزارش‌های تکراری
- سیستم گزارش سوءاستفاده
- بررسی خودکار محتوای نامناسب

**اولویت:** بالا  
**پیچیدگی:** متوسط

---

## بخش پنجم: بهبودهای API

### ۱۳. WebSocket برای Real-time

**وضعیت فعلی:** REST API

**پیشنهاد:**
- اعلان real-time برای مچ‌های جدید
- به‌روزرسانی وضعیت گزارش‌ها
- نمایش آنلاین بودن طرف مقابل

**اولویت:** کم  
**پیچیدگی:** بالا
**نظر توسعه‌دهنده:** رد. این‌ها را به واتساپ\ایتا می‌فرستیم.

**پاسخ Cascade:** ✅ تایید. از لیست حذف شد.

---

### ۱۴. Webhook برای یکپارچه‌سازی

**پیشنهاد:**
- Webhook برای رویدادهای مهم
- یکپارچه‌سازی با سیستم‌های خارجی
- API برای ربات‌های تلگرام/ایتا

**اولویت:** کم  
**پیچیدگی:** متوسط
**نظر توسعه‌دهنده:** رد

**پاسخ Cascade:** ✅ تایید. از لیست حذف شد.

---

## ماتریس اولویت‌بندی به‌روز شده

| پیشنهاد | اولویت | پیچیدگی | توصیه |
|---------|--------|---------|-------|
| تشخیص چهره با AI | بالا | بالا | فاز ۲ |
| حریم خصوصی | بالا | متوسط | فاز ۱ |
| جلوگیری از سوءاستفاده | بالا | متوسط | فاز ۱ |
| بهبود آپلود عکس | بالا | متوسط | فاز ۱ |
| سیستم اعلان‌های هوشمند | متوسط | متوسط | فاز ۲ |
| جستجوی پیشرفته | متوسط | متوسط | فاز ۲ |
| حالت آفلاین | متوسط | بالا | فاز ۳ |
| بهبود نمایش مچ‌ها | متوسط | کم | فاز ۱ |
| بهبود صفحه موکب من | کم | متوسط | فاز ۲ |
| بهبود نقشه | کم | بالا | فاز ۳ |
| پشتیبانی چندزبانه | کم | متوسط | فاز ۳ |
| WebSocket | کم | بالا | فاز ۳ |
| Webhook | کم | متوسط | فاز ۳ |

---

## نتیجه‌گیری

**فاز ۱ (MVP+):**
- بهبود آپلود عکس
- بهبود نمایش مچ‌ها
- حریم خصوصی
- جلوگیری از سوءاستفاده

**فاز ۲:**
- تشخیص چهره با AI
- سیستم اعلان‌های هوشمند
- جستجوی پیشرفته
- بهبود صفحه موکب من

**فاز ۳:**
- حالت آفلاین
- بهبود نقشه
- پشتیبانی چندزبانه
- WebSocket و Webhook
